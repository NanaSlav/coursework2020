<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
<div th:insert="common/navbar :: head"></div>
<div class="w3-sidebar w3-bar-block left left-small w3-xlarge w3-text-theme">
    <div style="margin-top: 20vh">
        <a th:href="@{'/search/?q=' + ${q} + '&type=project'}" class="w3-bar-item w3-button w3-right-align w3-padding-32">Search in all projects</a>
        <a th:href="@{'/search/?q=' + ${q} + '&type=account'}" class="w3-bar-item w3-button w3-right-align w3-padding-32">Search in accounts</a>
        <a th:href="@{'/search/?q=' + ${q} + '&type=my-project'}" class="w3-bar-item w3-button w3-right-align w3-padding-32">Search in my projects</a>
        <a th:href="@{'/search/?q=' + ${q} + '&type=my-task'}" class="w3-bar-item w3-button w3-right-align w3-padding-32">Search in my tasks</a>
        <a th:href="@{'/search/?q=' + ${q} + '&type=attach'}" class="w3-bar-item w3-button w3-right-align w3-padding-32">Search in my attached files</a>
    </div>
</div>

<div class="w3-container main-small">
    <div class="w3-display-container">
        <h1 class="w3-text-theme-dark">Search results: </h1>
        <p th:if="${!results.isEmpty()}" th:text="${q}" class="w3-text-theme w3-large"></p>
    </div>
    <hr>
    <div th:each="result : ${results}">
        <div th:if="${type.equals('project') || type.equals('my-project')}" class="w3-container">
            <a th:href="@{'/projects/' + ${result.getId()}}" class="w3-text-theme-dark w3-large" style="text-decoration: none;">
                <p th:text="${result.getName()}" class="w3-text-theme-dark w3-large"></p>
                <p th:text="${result.getDescription()}" class="w3-text-theme"></p>
            </a>
        </div>
        <div th:if="${type.equals('account')}" class="w3-container">
            <p th:text="${result.getUsername()}" class="w3-text-theme-dark w3-large"></p>
        </div>
        <div th:if="${type.equals('my-task')}">
            <a th:href="@{'/tasks/task/' + ${result.getId()}}" class="w3-text-theme-dark w3-large" style="text-decoration: none;">
                <p th:text="${result.getName()}" class="w3-text-theme-dark w3-large"></p>
                <p th:text="${result.getDescription()}" class="w3-text-theme"></p>
            </a>
        </div>

        <div th:if="${type.equals('attach')}">
            <a download th:href="@{'/avatars/files/' + ${result.getName()}}" class="w3-text-theme-dark w3-large" style="text-decoration: none;">
                <object>
                    <a th:href="@{'/tasks/task/' + ${result.getTask().getId()}}" th:text="'Task: ' + ${result.getTask().getName()}" class="w3-text-theme-dark w3-xlarge"></a>
                </object>
                <p th:text="${result.getName()}" class="w3-text-theme-dark w3-large"></p>
            </a>
        </div>
    </div>
    <div th:if="${results.isEmpty()}">
        <h2 th:text="'Nothing is found on request \'' + ${q} + '\''" class="w3-text-theme-dark"></h2>
        <p class="w3-text-theme w3-large">Please try to search by other key words</p>
    </div>

    <div th:if="${!results.isEmpty()}">
        <div th:insert="common/pagination :: pages" class="w3-margin"></div>
    </div>
</div>
</body>
</html>